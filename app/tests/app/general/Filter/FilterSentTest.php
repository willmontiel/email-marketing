<?php

namespace EmailMarketing\General\Filter;

/**
 * Generated by PHPUnit_SkeletonGenerator 1.2.1 on 2014-08-01 at 10:19:55.
 */
class FilterSentTest extends \PHPUnit_Framework_TestCase {

	/**
	 * @var FilterSent
	 */
	protected $object;

	/**
	 * Sets up the fixture, for example, opens a network connection.
	 * This method is called before a test is executed.
	 */
	protected function setUp() {
		$this->object = new FilterSent;
		
		$this->data = new \stdClass();
		$this->data->id = 45;
		$this->data->type = "mail";
	}
	
	/**
	 * @expectedException InvalidArgumentException
	 */
	public function testObjectIsNotAllowed()
	{
		$this->object->setObject('');
	}
	
	/**
	 * Que hayan recibido el correo 45 (Sin más filtros) condición AND
	 */
	public function testSentOneFilterConditionAll() {
		$this->data->required = true;
		$this->data->more = false;
		$this->data->negative = false;
		
		$this->object->setObject($this->data);
		$this->object->createSQL();
		
		$from = $this->object->getFrom();
		$expectedF = " JOIN mxc AS mc45 ON (mc45.idContact = c.idContact AND mc45.idMail = 45) ";
		
		$where = $this->object->getWhere();
		$expectedW = "";
		
		$this->assertEquals($expectedF, $from, 'FROM_SQL Que hayan recibido el correo 45 (Sin más filtros) condición AND');
		$this->assertEquals($expectedW, $where, 'WHERE_SQL Que hayan recibido el correo 45 (Sin más filtros) condición AND');
	}
	
	/**
	 * Que hayan recibido el correo 45 (Con más filtros) condición AND
	 */
	public function testSentMuchFilterConditionAll() {
		$this->data->required = true;
		$this->data->more = true;
		$this->data->negative = false;
		
		$this->object->setObject($this->data);
		$this->object->createSQL();
		
		$from = $this->object->getFrom();
		$expectedF = " JOIN mxc AS mc45 ON (mc45.idContact = c.idContact AND mc45.idMail = 45) ";
		
		$where = $this->object->getWhere();
		$expectedW = "";
		
		$this->assertEquals($expectedF, $from, 'FROM_SQL Que hayan recibido el correo 45 (Con más filtros) condición AND');
		$this->assertEquals($expectedW, $where, 'WHERE_SQL Que hayan recibido el correo 45 (Con más filtros) condición AND');
	}
	
	/**
	 * Que hayan recibido el correo 45 (Sin más filtros) condición OR
	 */
	public function testSentOneFilterConditionAny() {
		$this->data->required = false;
		$this->data->more = false;
		$this->data->negative = false;
		
		$this->object->setObject($this->data);
		$this->object->createSQL();
		
		$from = $this->object->getFrom();
		$expectedF = " JOIN mxc AS mc45 ON (mc45.idContact = c.idContact AND mc45.idMail = 45) ";
		
		$where = $this->object->getWhere();
		$expectedW = "";
		
		$this->assertEquals($expectedF, $from, 'FROM_SQL Que hayan recibido el correo 45 (Sin más filtros) condición OR');
		$this->assertEquals($expectedW, $where, 'WHERE_SQL Que hayan recibido el correo 45 (Sin más filtros) condición OR');
	}
	
	/**
	 * Que hayan recibido el correo 45 (Con más filtros) condición OR
	 */
	public function testSentMuchFilterConditionAny() {
		$this->data->required = false;
		$this->data->more = true;
		$this->data->negative = false;
		
		$this->object->setObject($this->data);
		$this->object->createSQL();
		
		$from = $this->object->getFrom();
		$expectedF = " LEFT JOIN mxc AS mc45 ON (mc45.idContact = c.idContact AND mc45.idMail = 45) ";
		
		$where = $this->object->getWhere();
		$expectedW = " mc45.idContact IS NOT NULL ";
		
		$this->assertEquals($expectedF, $from, 'FROM_SQL Que hayan recibido el correo 45 (Con más filtros) condición OR');
		$this->assertEquals($expectedW, $where, 'WHERE_SQL Que hayan recibido el correo 45 (Con más filtros) condición OR');
	}
	
	
	/**
	 * Que no hayan recibido el correo 45 (sin más filtros) condición AND
	 */
	public function testSentOneFilterConditionAllNegative() {
		$this->data->required = true;
		$this->data->more = false;
		$this->data->negative = true;
		
		$this->object->setObject($this->data);
		$this->object->createSQL();
		
		$from = $this->object->getFrom();
		$expectedF = " LEFT JOIN mxc AS mc45 ON (mc45.idContact = c.idContact AND mc45.idMail = 45) ";
		
		$where = $this->object->getWhere();
		$expectedW = " mc45.idContact IS NULL ";
		
		$this->assertEquals($expectedF, $from, 'FROM_SQL Que no hayan recibido el correo 45 (sin más filtros) condición AND');
		$this->assertEquals($expectedW, $where, 'WHERE_SQL Que no hayan recibido el correo 45 (sin más filtros) condición AND');
	}

	/**
	 * Que no hayan recibido el correo 45 (con más filtros) condición AND
	 */
	public function testSentMuchFilterConditionAllNegative() {
		$this->data->required = true;
		$this->data->more = true;
		$this->data->negative = true;
		
		$this->object->setObject($this->data);
		$this->object->createSQL();
		
		$from = $this->object->getFrom();
		$expectedF = " LEFT JOIN mxc AS mc45 ON (mc45.idContact = c.idContact AND mc45.idMail = 45) ";
		
		$where = $this->object->getWhere();
		$expectedW = " mc45.idContact IS NULL ";
		
		$this->assertEquals($expectedF, $from, 'FROM_SQL Que no hayan recibido el correo 45 (sin más filtros) condición AND');
		$this->assertEquals($expectedW, $where, 'WHERE_SQL Que no hayan recibido el correo 45 (sin más filtros) condición AND');
	}
	
	/**
	 * Que no hayan recibido el correo 45 (sin más filtros) condición OR
	 */
	public function testSentOneFilterConditionAnyNegative() {
		$this->data->required = false;
		$this->data->more = false;
		$this->data->negative = true;
		
		$this->object->setObject($this->data);
		$this->object->createSQL();
		
		$from = $this->object->getFrom();
		$expectedF = " LEFT JOIN mxc AS mc45 ON (mc45.idContact = c.idContact AND mc45.idMail = 45) ";
		
		$where = $this->object->getWhere();
		$expectedW = " mc45.idContact IS NULL ";
		
		$this->assertEquals($expectedF, $from, 'FROM_SQL Que no hayan recibido el correo 45 (sin más filtros) condición AND');
		$this->assertEquals($expectedW, $where, 'WHERE_SQL Que no hayan recibido el correo 45 (sin más filtros) condición AND');
	}
	
	/**
	 * Que no hayan recibido el correo 45 (con más filtros) condición OR
	 */
	public function testSentMuchFilterConditionAnyNegative() {
		$this->data->required = false;
		$this->data->more = true;
		$this->data->negative = true;
		
		$this->object->setObject($this->data);
		$this->object->createSQL();
		
		$from = $this->object->getFrom();
		$expectedF = " LEFT JOIN mxc AS mc45 ON (mc45.idContact = c.idContact AND mc45.idMail = 45) ";
		
		$where = $this->object->getWhere();
		$expectedW = " mc45.idContact IS NULL ";
		
		$this->assertEquals($expectedF, $from, 'FROM_SQL Que no hayan recibido el correo 45 (sin más filtros) condición AND');
		$this->assertEquals($expectedW, $where, 'WHERE_SQL Que no hayan recibido el correo 45 (sin más filtros) condición AND');
	}
}